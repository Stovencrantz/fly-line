(this["webpackJsonpfly-line"]=this["webpackJsonpfly-line"]||[]).push([[0],{120:function(e,t,n){},151:function(e,t,n){},153:function(e,t,n){"use strict";n.r(t);var a=n(3),r=n(0),c=n.n(r),i=n(13),o=n.n(i),s=(n(120),n(14)),l=n(15),u=n(185),d=n(187),j=n(189),m=n(190),b=n(96),p=n(191),h=n(202),x=n(57),g=n.n(x),f=n(73),O=n(69),v=n(58);n(122),n(124);v.a.initializeApp({apiKey:"AIzaSyDh_Xkab6hKgxeEAnn2vowFgdoX9YeDt0s",authDomain:"fly-line-66271.firebaseapp.com",projectId:"fly-line-66271",storageBucket:"fly-line-66271.appspot.com",messagingSenderId:"537260604396",appId:"1:537260604396:web:83e91b99998cccbbae9ec9",measurementId:"G-TSTY9EE3ZW"});var w=v.a.auth(),y=v.a.firestore(),C=new v.a.auth.GoogleAuthProvider,N=function(){w.signInWithPopup(C).then((function(e){return console.log("Signed in with google: ",e.user)})).catch((function(e){return console.log("Couldnt log in with google: ",e)}))},S=function(){var e=Object(O.a)(g.a.mark((function e(t,n){var a,r,c,i;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=3;break}return console.log("no user found"),e.abrupt("return");case 3:return a=y.doc("users/".concat(t.uid)),e.next=6,a.get();case 6:if(e.sent.exists){e.next=17;break}return r=t.email,c=t.displayName,i=t.photoURL,e.prev=9,e.next=12,a.set(Object(f.a)({displayName:c,email:r,photoURL:i},n));case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(9),console.error("error creating user document",e.t0);case 17:return e.abrupt("return",k(t.uid));case 18:case"end":return e.stop()}}),e,null,[[9,14]])})));return function(t,n){return e.apply(this,arguments)}}(),k=function(){var e=Object(O.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,y.doc("users/".concat(t)).get();case 5:return n=e.sent,e.abrupt("return",Object(f.a)({uid:t},n.data()));case 9:e.prev=9,e.t0=e.catch(2),console.error("Error fetching user",e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),E=n(68),I=n.n(E),T=Object(r.createContext)({});function W(){var e=Object(u.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}}))(),t=Object(r.useContext)(T),n=t.userContext,c=(t.setUserContext,Object(r.useState)("")),i=Object(s.a)(c,2),o=i[0],x=i[1],g=n.user,f=Object(l.f)();return Object(r.useEffect)((function(){console.log("Avatar data: ",g),x(g.photoURL)}),[]),Object(a.jsx)("div",{className:e.root,children:Object(a.jsx)(d.a,{position:"static",children:Object(a.jsxs)(j.a,{children:[Object(a.jsx)(m.a,{edge:"start",className:e.menuButton,color:"inherit","aria-label":"menu",children:Object(a.jsx)(I.a,{})}),Object(a.jsx)(b.a,{variant:"h6",className:e.title,children:"FLY-LINE"}),Object(a.jsx)(p.a,{color:"inherit",contained:!0,onClick:function(){console.log("Avatar link: ",o)},children:Object(a.jsx)(h.a,{alt:"static image",src:o||"https://res.cloudinary.com/dqcsk8rsc/image/upload/v1577268053/avatar-1-bitmoji_upgwhc.png"})}),Object(a.jsx)("button",{className:"w-full py-3 bg-red-600 mt-4 text-white",onClick:function(){return w.signOut(),void f.push("/")},children:"Sign out"})]})})})}var A=n(192),F=n(194),P=n(193),D=n(93),U=n.n(D),L=n(92),R=n.n(L),Y=n(91),q=n.n(Y);function G(){var e=Object(u.a)((function(e){return{root:{flexGrow:1,backgroundColor:"rgb(63 81 181)",width:"100vw",position:"absolute",bottom:"0px",textAlign:"center"},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}}))(),t=c.a.useState("recents"),n=Object(s.a)(t,2),r=n[0],i=n[1];return Object(a.jsxs)(A.a,{edge:"start",value:r,onChange:function(e,t){i(t)},className:e.root,children:[Object(a.jsx)(P.a,{href:"/profile",children:Object(a.jsx)(F.a,{label:"Favorites",value:"favorites",icon:Object(a.jsx)(q.a,{})})}),Object(a.jsx)(P.a,{href:"/map",children:Object(a.jsx)(F.a,{label:"Nearby",value:"nearby",icon:Object(a.jsx)(R.a,{})})}),Object(a.jsx)(F.a,{label:"Folder",value:"folder",icon:Object(a.jsx)(U.a,{})})]})}n(72);var M=n(54),B=n(196),z=n(199),H=n(197),J=n(201),Z=n(198),V=n(200),_=n(63),K=n.n(_),Q=n(195);function X(){function e(){return Object(a.jsxs)(b.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",Object(a.jsx)(P.a,{color:"inherit",href:"https://material-ui.com/",children:"Your Website"})," ",(new Date).getFullYear(),"."]})}var t=Object(u.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)},appTitle:{fontFamily:"Condiment",fontSize:"5vmin"}}}))(),n=Object(r.useState)(""),c=Object(s.a)(n,2),i=c[0],o=c[1],l=Object(r.useState)(""),d=Object(s.a)(l,2),j=d[0],m=d[1],x=Object(r.useState)(null),g=Object(s.a)(x,2),f=(g[0],g[1]),O=function(e){var t=e.currentTarget,n=t.name,a=t.value;"userEmail"===n?o(a):"userPassword"===n&&m(a)};return Object(a.jsxs)(Q.a,{component:"main",maxWidth:"xs",children:[Object(a.jsx)(B.a,{}),Object(a.jsxs)("div",{className:t.paper,children:[Object(a.jsx)(b.a,{component:"h1",variant:"h5",className:t.appTitle,children:"FLY-LINE"}),Object(a.jsx)(h.a,{className:t.avatar,children:Object(a.jsx)(K.a,{})}),Object(a.jsx)(b.a,{component:"h1",variant:"h5",children:"Sign in"}),Object(a.jsxs)("form",{className:t.form,noValidate:!0,children:[Object(a.jsx)(z.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"userEmail",label:"Email Address",name:"userEmail",placeholder:"E.g: faruq123@gmail.com",autoComplete:"email",autoFocus:!0,value:i,onChange:function(e){return O(e)}}),Object(a.jsx)(z.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"userPassword",label:"Password",type:"password",id:"userPassword",autoComplete:"current-password",value:j,onChange:function(e){return O(e)}}),Object(a.jsx)(H.a,{control:Object(a.jsx)(J.a,{value:"remember",color:"primary"}),label:"Remember me"}),Object(a.jsx)(p.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit,onClick:function(e){return function(e,t,n){e.preventDefault(),w.signInWithEmailAndPassword(t,n).then((function(e){console.log("Signed in with user: ",e)})).catch((function(e){f("Error signing in with password and email!"),console.error("Error signing in with password and email",e)}))}(e,i,j)},children:"Sign In"}),Object(a.jsx)("p",{style:{textAlign:"center"},children:"Or"}),Object(a.jsx)(p.a,{fullWidth:!0,variant:"contained",color:"secondary",className:"MuiButton-fullWidth py-2 text-white",onClick:function(){return N()},children:"Sign In with Google"}),Object(a.jsxs)(Z.a,{container:!0,children:[Object(a.jsx)(Z.a,{item:!0,xs:!0,children:Object(a.jsx)(P.a,{href:"/passwordReset",variant:"body2",children:"Forgot password?"})}),Object(a.jsx)(Z.a,{item:!0,children:Object(a.jsx)(P.a,{href:"/signUp",variant:"body2",children:"Don't have an account? Sign Up"})})]})]})]}),Object(a.jsx)(V.a,{mt:8,children:Object(a.jsx)(e,{})})]})}function $(){function e(){return Object(a.jsxs)(b.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",Object(a.jsx)(P.a,{color:"inherit",href:"https://material-ui.com/",children:"Your Website"})," ",(new Date).getFullYear(),"."]})}var t=Object(u.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)},appTitle:{fontFamily:"Condiment",fontSize:"5vmin"}}}))(),n=Object(r.useState)(""),c=Object(s.a)(n,2),i=c[0],o=c[1],l=Object(r.useState)(""),d=Object(s.a)(l,2),j=d[0],m=d[1],x=Object(r.useState)(""),g=Object(s.a)(x,2),f=g[0],O=g[1],v=function(e){var t=e.currentTarget,n=t.name,a=t.value;"userEmail"===n?o(a):"userPassword"===n?m(a):"displayName"===n&&O(a),console.log("Email: ",i),console.log("password: ",j),console.log("displayName: ",f)};return Object(a.jsxs)(Q.a,{component:"main",maxWidth:"xs",children:[Object(a.jsx)(B.a,{}),Object(a.jsxs)("div",{className:t.paper,children:[Object(a.jsx)(b.a,{component:"h1",variant:"h5",className:t.appTitle,children:"FLY-LINE"}),Object(a.jsx)(h.a,{className:t.avatar,children:Object(a.jsx)(K.a,{})}),Object(a.jsx)(b.a,{component:"h1",variant:"h5",children:"Sign up"}),Object(a.jsxs)("form",{className:t.form,noValidate:!0,children:[Object(a.jsxs)(Z.a,{container:!0,spacing:2,children:[Object(a.jsx)(Z.a,{item:!0,xs:12,children:Object(a.jsx)(z.a,{type:"text",autoComplete:"fname",name:"displayName",variant:"outlined",required:!0,fullWidth:!0,id:"displayName",label:"Display Name",autoFocus:!0,value:f,onChange:function(e){return v(e)}})}),Object(a.jsx)(Z.a,{item:!0,xs:12,children:Object(a.jsx)(z.a,{variant:"outlined",type:"email",required:!0,fullWidth:!0,id:"userEmail",label:"Email Address",placeholder:"E.g: faruq123@gmail.com",name:"userEmail",value:i,onChange:function(e){return v(e)}})}),Object(a.jsx)(Z.a,{item:!0,xs:12,children:Object(a.jsx)(z.a,{variant:"outlined",required:!0,fullWidth:!0,name:"userPassword",label:"Password",type:"password",id:"userPassword",value:j,onChange:function(e){return v(e)}})}),Object(a.jsx)(Z.a,{item:!0,xs:12,children:Object(a.jsx)(H.a,{control:Object(a.jsx)(J.a,{value:"allowExtraEmails",color:"primary"}),label:"I want to receive inspiration, marketing promotions and updates via email."})})]}),Object(a.jsx)(p.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit,onClick:function(e){!function(e,t,n){e.preventDefault(),w.createUserWithEmailAndPassword(t,n).then((function(e){console.log("result of create user with email and password: ",e),console.log("Display namne: ",f),w.currentUser.updateProfile({displayName:f}).then((function(){S(e)})).catch((function(e){return console.log(e)}))})).catch((function(e){var t=e.code,n=e.message;"auth/weak-password"===t?alert("The password is too weak."):alert(n),console.log(e)})),o(""),m(""),O("")}(e,i,j)},children:"Sign Up"}),Object(a.jsx)("p",{style:{textAlign:"center"},children:"or"}),Object(a.jsx)(p.a,{fullWidth:!0,variant:"contained",color:"secondary",className:"MuiButton-fullWidth py-2 text-white",onClick:function(){return N()},children:"Sign In with Google"}),Object(a.jsx)(Z.a,{container:!0,justify:"flex-end",children:Object(a.jsx)(Z.a,{item:!0,children:Object(a.jsx)(P.a,{href:"/signIn",variant:"body2",children:"Already have an account? Sign in"})})})]})]}),Object(a.jsx)(V.a,{mt:5,children:Object(a.jsx)(e,{})})]})}var ee=function(){var e=Object(r.useContext)(T),t=e.userContext,n=(e.setUserContext,t.user),c=n.photoURL,i=n.displayName,o=n.email,s=Object(l.f)();return console.log(t),Object(a.jsxs)("div",{className:"mx-auto w-11/12 md:w-2/4 py-8 px-4 md:px-8",children:[Object(a.jsxs)("div",{className:"flex border flex-col items-center md:flex-row md:items-start border-blue-400 px-3 py-4",children:[Object(a.jsx)("div",{style:{background:"url(".concat(c||"https://res.cloudinary.com/dqcsk8rsc/image/upload/v1577268053/avatar-1-bitmoji_upgwhc.png",")  no-repeat center center"),backgroundSize:"cover",height:"200px",width:"200px"},className:"border border-blue-300"}),Object(a.jsxs)("div",{className:"md:pl-4",children:[Object(a.jsx)("h2",{className:"text-2xl font-semibold",children:i}),Object(a.jsx)("h3",{className:"italic",children:o})]})]}),Object(a.jsx)("button",{className:"w-full py-3 bg-red-600 mt-4 text-white",onClick:function(){return w.signOut(),void s.push("/")},children:"Sign out"})]})};function te(){var e=Object(r.useState)(""),t=Object(s.a)(e,2),n=t[0],c=t[1],i=Object(r.useState)(!1),o=Object(s.a)(i,2),l=o[0],d=o[1],j=Object(r.useState)(null),m=Object(s.a)(j,2),h=m[0],x=(m[1],Object(u.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)},appTitle:{fontFamily:"Condiment",fontSize:"5vmin"},successMsg:{color:"green"}}}))());return Object(a.jsx)(Q.a,{component:"main",maxWidth:"xs",children:Object(a.jsxs)("div",{className:x.paper,children:[Object(a.jsx)(b.a,{component:"h1",variant:"h5",className:x.appTitle,children:"FLY-LINE"}),Object(a.jsx)(b.a,{component:"h1",variant:"h5",children:"Reset your Password"}),Object(a.jsxs)("div",{className:"border border-blue-300 mx-auto w-11/12 md:w-2/4 rounded py-8 px-4 md:px-8",children:[Object(a.jsxs)("form",{action:"",children:[l&&Object(a.jsx)(b.a,{className:x.successMsg,children:"An email has been sent to you!"}),null!==h&&Object(a.jsx)("div",{className:"py-3 bg-red-600 w-full text-white text-center mb-3",children:h}),Object(a.jsx)(z.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"userEmail",label:"Email Address",name:"userEmail",placeholder:"E.g: faruq123@gmail.com",autoComplete:"email",autoFocus:!0,value:n,onChange:function(e){return function(e){var t=e.currentTarget,n=t.name,a=t.value;"userEmail"===n&&c(a)}(e)}}),Object(a.jsx)(p.a,{variant:"contained",type:"submit",fullWidth:!0,color:"primary",className:"py-3",onClick:function(e){return function(e){e.preventDefault(),console.log("Sending reset email to: ",n),w.sendPasswordResetEmail(n).then((function(){alert("Email sent"),d(!0),setTimeout((function(){d(!1)}),3e3)})).catch((function(e){console.log(e)}))}(e)},children:"Send me a reset link"})]}),Object(a.jsx)(P.a,{href:"/",children:Object(a.jsx)(b.a,{align:"center",children:"\u2190 back to sign in page"})})]})]})})}n(151);var ne=n(47),ae=n.n(ne),re=n(94),ce=n.n(re);n(152);function ie(){function e(e){var t=new ae.a.Map({container:"map",style:"mapbox://styles/mapbox/streets-v11",center:e,zoom:12});t.addControl(new ae.a.GeolocateControl,"bottom-right");var n=new ae.a.NavigationControl;t.addControl(n,"top-right");var a=new ce.a({accessToken:ae.a.accessToken});t.addControl(a,"top-left")}return ae.a.accessToken="pk.eyJ1Ijoic3RvdmVuY3JhbnR6IiwiYSI6ImNraHh0YnZicDAxZTMyeG95M3d1M3g1MmcifQ.rAmHkmqJ0HI2WocSFACwZQ",navigator.geolocation.getCurrentPosition((function(t){console.log("position: ",t),e([t.coords.longitude,t.coords.latitude])}),(function(t){console.log("Error: ",t),e([-2.24,53.48])}),{enableHighAccuracy:!0}),Object(a.jsx)("div",{id:"map"})}function oe(){return Object(a.jsx)("div",{children:Object(a.jsx)(ie,{})})}function se(){var e=Object(r.useContext)(T),t=e.userContext;e.setUserContext;return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(M.a,{children:t.user?Object(a.jsxs)(Q.a,{style:{minWidth:"100vw",minHeight:"100vh",paddingLeft:"0px",paddingRight:"0px"},children:[Object(a.jsx)(W,{}),Object(a.jsxs)(l.c,{children:[Object(a.jsx)(l.a,{exact:!0,path:["/","/profile"],component:ee}),Object(a.jsx)(l.a,{exact:!0,path:"/map",component:oe})]}),Object(a.jsx)(G,{})]}):Object(a.jsxs)(l.c,{children:[Object(a.jsx)(l.a,{exact:!0,path:["/","/signin"],component:X}),Object(a.jsx)(l.a,{path:"/signup",component:$}),Object(a.jsx)(l.a,{exact:!0,path:"/passwordreset",component:te})]})})})}function le(){var e=Object(r.useState)({user:null}),t=Object(s.a)(e,2),n=t[0],c=t[1];return console.log("User context on mount: ",n),Object(r.useEffect)((function(){w.onAuthStateChanged((function(e){console.log("UserAuth: ",e),S(e).then((function(e){console.log("User data from auth: ",e),c({user:e})}))}))}),[]),Object(a.jsx)(T.Provider,{value:{userContext:n,setUserContext:c},children:Object(a.jsx)("div",{className:"App",children:Object(a.jsx)(se,{})})})}var ue=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,205)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),c(e),i(e)}))};o.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(le,{})}),document.getElementById("root")),ue()}},[[153,1,2]]]);
//# sourceMappingURL=main.8c9fa615.chunk.js.map